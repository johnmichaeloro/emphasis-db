<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <% include ../partials/cssLinks.ejs %>
	</head>
	<body>

	<br><br><br><br><br><br>
<div class="container-fluid">

<div class="row">

  <div class="col-md-2" id="filterBox">
  <form action="/entries" method="get">

    <div class="filterOption">
      <h4>Content Type</h4>
      <select name="contentType">
        <option value="<%=content%>"><%=content%></option>
        <option value="news">News</option>
        <option value="opinion">Opinion</option>
        <option value="fiction">Fiction</option>
        <option value="marketing">Marketing</option>
        <option value="business">Business</option>
        <option value="legal">Legal</option>
        <option value="technical">Technical</option>
        <option value="academic">Academic</option>
        <option value="oratory">Oratory</option>
        <option value="other">Other</option>
        <option value="ALL">ALL</option>
      </select>
    </div>

    <div class="filterOption">
    <h4>Publisher</h4>
    <input type="text" name="publisher" value="<%=publisher%>">
    <h4>Publication Year</h4>
    <input type="number" name="publicationYear" value="<%=pbYear%>">
    </div>

    <div class="filterOption">
    <h4>Author Name</h4>
    <input type="text" name="authorName" value="<%=author%>">
    </div>

    <div class="filterOption">
    <h4>Engagement Score</h4>
    <select name="engagementScore" value="<%=engagement%>">
      <%let engagTen = (parseInt(engagement) + 10) %>
      <option value="<%=engagement%>"><%=engagement%>-<%=engagTen%></option>
      <option value="ALL">ALL</option>
      <option value="0">0-10</option>
      <option value="10">10-20</option>
      <option value="20">20-30</option>
      <option value="30">30-40</option>
      <option value="40">40-50</option>
      <option value="50">50-60</option>
      <option value="60">60-70</option>
      <option value="70">70-80</option>
      <option value="80">80-90</option>
      <option value="90">90-100</option>
    </select>
    </div>

    <div class="filterOption">
      <button type="submit">Filter Entries</button>
    </div>
  </form>
</div>
<div class="col-sm-10">

</div>
</div>
<div class="col-sm-11" id="filterBox2">
  <form action="/entries" method="get">

    <div class="filterOption">
      <h5>Content Type</h5>
      <select name="contentType">
        <option value="<%=content%>"><%=content%></option>
        <option value="news">News</option>
        <option value="opinion">Opinion</option>
        <option value="fiction">Fiction</option>
        <option value="marketing">Marketing</option>
        <option value="business">Business</option>
        <option value="legal">Legal</option>
        <option value="technical">Technical</option>
        <option value="academic">Academic</option>
        <option value="oratory">Oratory</option>
        <option value="other">Other</option>
        <option value="ALL">ALL</option>
      </select>
    </div>

    <div class="filterOption">
    <h5>Publisher</h5>
    <input type="text" name="publisher" value="<%=publisher%>">
    </div>
    <div class="filterOption">
    <h5>Pb Year</h5>
    <input type="number" name="publicationYear" value="<%=pbYear%>">
    </div>
    <div class="filterOption">
    <h5>Author Name</h5>
    <input type="text" name="authorName" value="<%=author%>">
    </div>

    <div class="filterOption">
    <h5>Engagement</h5>
    <select name="engagementScore" value="<%=engagement%>">
      <% engagTen = (parseInt(engagement) + 10) %>
      <option value="<%=engagement%>"><%=engagement%>-<%=engagTen%></option>
      <option value="ALL">ALL</option>
      <option value="0">0-10</option>
      <option value="10">10-20</option>
      <option value="20">20-30</option>
      <option value="30">30-40</option>
      <option value="40">40-50</option>
      <option value="50">50-60</option>
      <option value="60">60-70</option>
      <option value="70">70-80</option>
      <option value="80">80-90</option>
      <option value="90">90-100</option>
    </select>
    </div>

    <div class="filterOption">
      <button type="submit">Filter Entries</button>
    </div>
  </form>
</div>
<div class="row">
  <div class="col-md-1">

  </div>
  <div class="col-md-10 entryTitle">
    <h1>ENTRY DATABASE</h1>
  </div>
</div>
<br><br><br><br>
<div class="col-md-2">

</div>
<div class="col-md-10" id="entriesIndex">
  <% if (totalEnt.length > 0){%>
      <% for (let i = 0; i < entries.length; i++) {%>
        <div class="col-md-5 entry">
        <a href="/entries/<%=entries[i]._id%>" class="entryLink">
        <div class="col-md-12">
            <h4><%=entries[i].title%></h4>
            <div class="">
            <div class="entryInfo"><%=entries[i].string.length%> Characters</div>
            <div class="entryInfo"><%=entries[i].author%></div>
            <div class="entryInfo"><%=entries[i].publisher%></div>
            <div class="entryInfo"><%=entries[i].publicationYear%></div>
            <div class="entryInfo"><%=entries[i].engagementScore%> Engagement</div>
            </div>
            <p class="col-md-12 entryPDisplay">
              <%=entries[i].text[0].text%>
            </p>
        </div>
        </a>
      </div>
      <%}%>
      <%} else {%>
        <div class="col-md-10 entry">
        <div class="col-md-12">
            <h4 style="font-size:30px">No Entries Of This Type</h4>
            <a href="/entries/new"><h3 class="createPrompt">Create One?</h5></a>
            <a href="/entries"><h3 class="createPrompt">Try Again?</h5></a>
        </div>
        </a>
      </div>
      <%}%>
  </div>
<br><br><br>
<div class="container selectPage col-md-12">
  <div class="col-md-12 pageForm">
    <form action="/entries" method="get">
      <input style="display:none" name="contentType" value="<%=content%>">
      <input style="display:none" name="authorName" value="<%=author%>">
        <% let base = pageNum - 2;%>
        <% let top = pageNum + 5;%>
        <% if (top > (totalEnt.length/16)){top = (totalEnt.length/16)} %>
        <% if (base <= 0){base = 1} %>
        <% if (pageNum > 5){%>
        <button type="submit" name="number" value="<%=1%>">1...</button>
        <% } %>
        <% for (let i = base; i < top; i++){ %>
          <button type="submit" name="number" value="<%=i%>"><%=i%></button>
        <% } %>

    </form>
    </div>
  </div>
</div>


    <% include ../partials/navbar.ejs %>
  </body>
</html>
